<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jims.nurse.dao.BedRecDao">
    
	<sql id="bedRecColumns">
		a.ward_code AS "wardCode",
		a.bed_no AS "bedNo",
		a.bed_label AS "bedLabel",
		a.room_no AS "roomNo",
		a.dept_code AS "deptCode",
		a.bed_approved_type AS "bedApprovedType",
		a.bed_sex_type AS "bedSexType",
		a.bed_class AS "bedClass",
		a.bed_status AS "bedStatus",
		a.lend_attr AS "lendAttr",
		a.lend_bed_no AS "lendBedNo",
		a.lend_bed_dept AS "lendBedDept",
		a.lend_bed_ward AS "lendBedWard",
		a.lock_status AS "lockStatus",
		a.lock_operator AS "lockOperator",
		a.aircondition_class AS "airconditionClass",
		a.patient_id AS "patientId"
	</sql>
	
	<sql id="bedRecJoins">
	</sql>
    
	<select id="get" resultType="BedRec">
		SELECT 
			<include refid="bedRecColumns"/>
		FROM bed_rec a
		<include refid="bedRecJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="BedRec">
		SELECT 
			<include refid="bedRecColumns"/>
		FROM bed_rec a
		<include refid="bedRecJoins"/>
		<where>
			a.WARD_CODE = #{wardCode}
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<select id="findAllList" resultType="BedRec">
		SELECT 
			<include refid="bedRecColumns"/>
		FROM bed_rec a
		<include refid="bedRecJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO bed_rec(
			ward_code,
			bed_no,
			bed_label,
			room_no,
			dept_code,
			bed_approved_type,
			bed_sex_type,
			bed_class,
			bed_status,
			lend_attr,
			lend_bed_no,
			lend_bed_dept,
			lend_bed_ward,
			lock_status,
			lock_operator,
			aircondition_class,
			patient_id
		) VALUES (
			#{wardCode},
			#{bedNo},
			#{bedLabel},
			#{roomNo},
			#{deptCode},
			#{bedApprovedType},
			#{bedSexType},
			#{bedClass},
			#{bedStatus},
			#{lendAttr},
			#{lendBedNo},
			#{lendBedDept},
			#{lendBedWard},
			#{lockStatus},
			#{lockOperator},
			#{airconditionClass},
			#{patientId}
		)
	</insert>
	
	<update id="update">
		UPDATE bed_rec SET 	
			ward_code = #{wardCode},
			bed_no = #{bedNo},
			bed_label = #{bedLabel},
			room_no = #{roomNo},
			dept_code = #{deptCode},
			bed_approved_type = #{bedApprovedType},
			bed_sex_type = #{bedSexType},
			bed_class = #{bedClass},
			bed_status = #{bedStatus},
			lend_attr = #{lendAttr},
			lend_bed_no = #{lendBedNo},
			lend_bed_dept = #{lendBedDept},
			lend_bed_ward = #{lendBedWard},
			lock_status = #{lockStatus},
			lock_operator = #{lockOperator},
			aircondition_class = #{airconditionClass},
			patient_id = #{patientId}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM bed_rec
		WHERE id = #{id}
	</update>
	
</mapper>