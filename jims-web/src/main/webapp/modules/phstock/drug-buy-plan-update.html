<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>药品购买计划调整</title>
    <link rel="stylesheet" type="text/css" href="/static/easyui/css/bootstrap/easyui.css">
    <link rel="stylesheet" type="text/css" href="/static/easyui/css/icon.css">
    <script type="text/javascript" src="/static/jquery/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/static/easyui/js/jquery.easyui.min.js"></script>

</head>
<body>
<table id="buyPlanTable" style="width:400px;"></table>
<div id="tbn" style="height: 40px; padding-left: 5px;padding-top: 10px">
    <label for="temporaryNo">采购单据号:</label>
    <input id="temporaryNo">
    &nbsp;&nbsp;
    <a href="#" id="addButton"></a>
    <a href="#" id="delButton"></a>
    <a href="#" id="saveButton"></a>
    <a href="#" id="flushButton"></a>
    <a href="#" id="closeButton"></a>
</div>
<div id="drugPriceWindow">
    <table id="drugPriceTable"></table>
</div>
<script>
    $.extend($.fn.datagrid.methods, {
        editCell: function(jq,param){
            return jq.each(function(){
                var opts = $(this).datagrid('options');
                var fields = $(this).datagrid('getColumnFields',true).concat($(this).datagrid('getColumnFields'));
                for(var i=0; i<fields.length; i++){
                    var col = $(this).datagrid('getColumnOption', fields[i]);
                    col.editor1 = col.editor;
                    if (fields[i] != param.field){
                        col.editor = null;
                    }
                }
                $(this).datagrid('beginEdit', param.index);
                for(var i=0; i<fields.length; i++){
                    var col = $(this).datagrid('getColumnOption', fields[i]);
                    col.editor = col.editor1;
                }
            });
        }
    });
    $.extend({
        ajaxAsync : function(url,data,callback,type,async){
            return $.ajax({
                type: type,
                url: url,
                async : async,   // true 异步,false 同步
                data: data,
                success: callback,
                'contentType': 'application/json'
            });
        }
    })
</script>
<script src="js/drug-buy-plan-update.js"></script>
</body>
</html>